<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trade Python AI Service API ë¬¸ì„œ">
    <title>Trade Python AI Service - API ë¬¸ì„œ</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui.css">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
    <style>
        /* ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        
        .custom-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .custom-header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .custom-header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .api-info {
            background: #f8f9fa;
            padding: 15px 20px;
            border-left: 4px solid #667eea;
            margin: 20px;
            border-radius: 5px;
            font-size: 14px;
            color: #666;
        }
        
        .success-notice {
            background: #d4edda;
            color: #155724;
            padding: 15px 20px;
            margin: 20px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
        }
        
        .swagger-ui .topbar {
            display: none;
        }
        
        .swagger-ui .info {
            margin: 20px 0;
        }
        
        /* í•œêµ­ì–´ í°íŠ¸ ìµœì í™” */
        .swagger-ui {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        
        /* ì‘ë‹µ ì½”ë“œ ìƒ‰ìƒ ê°œì„  */
        .swagger-ui .responses-inner h4 {
            font-size: 14px;
            margin: 0;
            padding: 10px;
            border-radius: 4px;
            color: white;
            text-align: center;
        }
        
        .swagger-ui .response-col_status {
            font-weight: bold;
        }
        
        /* ì„±ê³µ ì‘ë‹µ */
        .swagger-ui .responses-inner h4:contains("200"),
        .swagger-ui .responses-inner h4:contains("201") {
            background-color: #49cc90;
        }
        
        /* ì—ëŸ¬ ì‘ë‹µ */
        .swagger-ui .responses-inner h4:contains("400"),
        .swagger-ui .responses-inner h4:contains("404"),
        .swagger-ui .responses-inner h4:contains("500") {
            background-color: #f93e3e;
        }
        
        /* Windows ìµœì í™” ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
        @media print {
            .custom-header {
                background: #667eea !important;
                -webkit-print-color-adjust: exact;
            }
            
            .swagger-ui .btn {
                display: none !important;
            }
            
            .swagger-ui .try-out {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="custom-header">
        <h1>Trade Python AI Service</h1>
        <p>AI ê¸°ë°˜ ë¬´ì—­ ê·œì œ ë ˆì´ë” í”Œë«í¼ API ë¬¸ì„œ</p>
    </div>
    
    <div class="success-notice">
        <strong>âœ… OpenAPI ì°¸ì¡° í•´ê²° ë¬¸ì œ ìˆ˜ì •ë¨!</strong><br>
        â€¢ Context7 ê°€ì´ë“œì— ë”°ë¼ ëª¨ë“  $ref ì°¸ì¡°ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.<br>
        â€¢ HTTPValidationErrorì™€ ValidationError ì°¸ì¡° ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
        â€¢ Windows psycopg í˜¸í™˜ì„± ë¬¸ì œë„ í•¨ê»˜ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>
    
    <div class="api-info">
        <strong>ğŸ“‹ API ì •ë³´:</strong><br>
        â€¢ ë²„ì „: 6.1.0<br>
        â€¢ ìƒì„±ì¼: 2025ë…„ 07ì›” 05ì¼ 11:15:50<br>
        â€¢ ì„œë²„: http://0.0.0.0:8000/api/v1<br>
        â€¢ ë¬¸ì„œ íƒ€ì…: OpenAPI 3.1.0 (ì°¸ì¡° í•´ê²°ë¨)<br>
        â€¢ í”Œë«í¼: Windows 11
    </div>
    
    <div id="swagger-ui"></div>
    
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-bundle.js" crossorigin></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-standalone-preset.js" crossorigin></script>
    <script>
        // ìŠ¤í‚¤ë§ˆ ë°ì´í„° ì„ë² ë”© (ëª¨ë“  ì°¸ì¡°ê°€ í•´ê²°ë¨)
        const apiSpec = {
  "openapi": "3.1.0",
  "info": {
    "title": "Trade Python AI Service",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/chat/": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "AI Chat Endpoint with Streaming",
        "description": "ì‚¬ìš©ìì˜ ì±„íŒ… ë©”ì‹œì§€ë¥¼ ë°›ì•„ AIì™€ ëŒ€í™”í•˜ê³ , ì‘ë‹µì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°í•¨.\n\n- **ìš”ì²­ ë³¸ë¬¸:** `ChatRequest` ëª¨ë¸ ì°¸ì¡°\n    - `user_id`: íšŒì› ì‹ë³„ì (ì—†ìœ¼ë©´ ë¹„íšŒì›)\n    - `session_uuid`: ê¸°ì¡´ ëŒ€í™”ì˜ UUID\n    - `message`: ì‚¬ìš©ì ë©”ì‹œì§€\n- **ì‘ë‹µ:**\n    - `StreamingResponse`: `text/event-stream` í˜•ì‹ì˜ SSE ìŠ¤íŠ¸ë¦¼.\n    - ê° ì´ë²¤íŠ¸ëŠ” JSON í˜•ì‹ì´ë©°, `type`ê³¼ `data` í•„ë“œë¥¼ í¬í•¨í•¨.\n      - `type: 'session_id'`: ìƒˆ ì±„íŒ… ì„¸ì…˜ì´ ì‹œì‘ë  ë•Œ ë°˜í™˜ë˜ëŠ” ì„¸ì…˜ UUID\n      - `type: 'token'`: AIê°€ ìƒì„±í•˜ëŠ” ì‘ë‹µ í† í°\n      - `type: 'finish'`: ìŠ¤íŠ¸ë¦¼ ì¢…ë£Œ\n      - `type: 'error'`: ì˜¤ë¥˜ ë°œìƒ",
        "operationId": "handle_chat_api_v1_chat__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "user_id": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "title": "User Id",
                    "description": "íšŒì› ID. ì—†ìœ¼ë©´ ë¹„íšŒì›ìœ¼ë¡œ ê°„ì£¼í•¨."
                  },
                  "session_uuid": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "title": "Session Uuid",
                    "description": "ê¸°ì¡´ ì±„íŒ… ì„¸ì…˜ì˜ UUID. ìƒˆ ì±„íŒ… ì‹œì‘ ì‹œì—ëŠ” null."
                  },
                  "message": {
                    "type": "string",
                    "maxLength": 5000,
                    "minLength": 1,
                    "title": "Message",
                    "description": "ì‚¬ìš©ìì˜ ì§ˆë¬¸ ë©”ì‹œì§€"
                  }
                },
                "type": "object",
                "required": [
                  "message"
                ],
                "title": "ChatRequest",
                "description": "/api/v1/chat ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ìš”ì²­ ìŠ¤í‚¤ë§ˆ.\nêµ¬í˜„ê³„íš.md vFinal ë° chat_endpoint_implementation_plan.md v1.0 ê¸°ì¤€."
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "ì±„íŒ… ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          },
          "500": {
            "description": "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "detail": {
                      "items": {
                        "properties": {
                          "loc": {
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "integer"
                                }
                              ]
                            },
                            "type": "array",
                            "title": "Location"
                          },
                          "msg": {
                            "type": "string",
                            "title": "Message"
                          },
                          "type": {
                            "type": "string",
                            "title": "Error Type"
                          }
                        },
                        "type": "object",
                        "required": [
                          "loc",
                          "msg",
                          "type"
                        ],
                        "title": "ValidationError"
                      },
                      "type": "array",
                      "title": "Detail"
                    }
                  },
                  "type": "object",
                  "title": "HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/news/": {
      "post": {
        "tags": [
          "News"
        ],
        "summary": "ì˜¨ë””ë§¨ë“œ ë‰´ìŠ¤ ìƒì„±",
        "description": "Spring Boot ìŠ¤ì¼€ì¤„ëŸ¬ì— ì˜í•´ í˜¸ì¶œë˜ëŠ” ì˜¨ë””ë§¨ë“œ ë‰´ìŠ¤ ìƒì„± ì—”ë“œí¬ì¸íŠ¸.\nClaude 4 Sonnetì˜ ë„¤ì´í‹°ë¸Œ ì›¹ ê²€ìƒ‰ì„ ì‚¬ìš©í•˜ì—¬ ìµœì‹  ë¬´ì—­ ë‰´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  DBì— ì €ì¥í•©ë‹ˆë‹¤.",
        "operationId": "generate_trade_news_api_v1_news__post",
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "ë‰´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          },
          "500": {
            "description": "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          }
        }
      }
    },
    "/api/v1/monitoring/run-monitoring": {
      "post": {
        "tags": [
          "Monitoring"
        ],
        "summary": "Run Monitoring",
        "description": "ëª¨ë‹ˆí„°ë§ì´ í™œì„±í™”ëœ ëª¨ë“  ë¶ë§ˆí¬ì˜ ìµœì‹  ë³€ê²½ ì‚¬í•­ì„ ì£¼ê¸°ì ìœ¼ë¡œ ê°ì§€í•˜ê³ , ìœ ì˜ë¯¸í•œ ì—…ë°ì´íŠ¸ ë°œìƒ ì‹œ ì•Œë¦¼ ìƒì„± ì‘ì—…ì„ Redisì— íì‰í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.\n\n<details>\n<summary>I. Producer (ìƒì‚°ì: FastAPI) ë¡œì§</summary>\n\n> ì´ ì—”ë“œí¬ì¸íŠ¸ëŠ” ì•Œë¦¼ ì‘ì—…ì„ ìƒì„±í•˜ëŠ” 'ìƒì‚°ì' ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n**ì£¼ìš” ì²˜ë¦¬ ìˆœì„œ:**\n1.  **ë¶„ì‚° ë½ (Distributed Lock):** Redis (`SET NX`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ë™ì‹œ ì‹¤í–‰ì„ ë°©ì§€í•©ë‹ˆë‹¤.\n2.  **ë¶ë§ˆí¬ ì¡°íšŒ:** `monitoring_active=True`ì¸ ëª¨ë“  ë¶ë§ˆí¬ë¥¼ DBì—ì„œ ì¡°íšŒí•©ë‹ˆë‹¤.\n3.  **ë³‘ë ¬ ë° ì†ë„ ì œì–´ ì²˜ë¦¬:**\n    -   `asyncio.Semaphore`: LangChain ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë™ì‹œ ìš”ì²­ ìˆ˜ë¥¼ ì œí•œí•˜ì—¬ ê³¼ë¶€í•˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.\n    -   `Aiolimiter`: ë¶„ë‹¹ ìš”ì²­ ìˆ˜ë¥¼ ì œì–´í•˜ì—¬ ì™¸ë¶€ APIì˜ ì†ë„ ì œí•œ(Rate Limit)ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.\n    -   `Tenacity`: API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì§€ìˆ˜ ë°±ì˜¤í”„(Exponential Backoff)ë¥¼ ì ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ì¬ì‹œë„í•©ë‹ˆë‹¤.\n4.  **ì—…ë°ì´íŠ¸ ì²˜ë¦¬ ë° Redis íì‰ (ì‹ ë¢°ì„± í íŒ¨í„´):**\n    -   **DB ì €ì¥:** ë³€ê²½ ì‚¬í•­ ë°œê²¬ ì‹œ, `update_feeds` í…Œì´ë¸”ì— ì—…ë°ì´íŠ¸ ë‚´ì—­ì„ ì €ì¥í•©ë‹ˆë‹¤.\n    -   **Redis íì‰:**\n        1.  **ì•Œë¦¼ ìƒì„¸ ì •ë³´ (Hash):** `HSET` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ `daily_notification:detail:{uuid}` í‚¤ì— ì•Œë¦¼ ìƒì„¸ ë‚´ìš©ì„ ì €ì¥í•©ë‹ˆë‹¤.\n            -   `HSET`: Hash ë°ì´í„° êµ¬ì¡°(Key-Value ë§µê³¼ ìœ ì‚¬)ì— ì—¬ëŸ¬ í•„ë“œ-ê°’ ìŒì„ ì €ì¥í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n        2.  **ì•Œë¦¼ ì‘ì—… í (List):** `LPUSH` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ `daily_notification:queue:{TYPE}` (ì˜ˆ: `...:EMAIL`) í‚¤ì— ì²˜ë¦¬í•  ì‘ì—…ì˜ `uuid`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\n            -   `LPUSH`: List ë°ì´í„° êµ¬ì¡°(Array ë˜ëŠ” LinkedListì™€ ìœ ì‚¬)ì˜ ë§¨ ì•ì— ìš”ì†Œë¥¼ ì¶”ê°€í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n</details>\n\n<details>\n<summary>II. Consumer (ì†Œë¹„ì: Spring Boot) êµ¬í˜„ ê°€ì´ë“œ</summary>\n\n> Redis íì— ìŒ“ì¸ ì‘ì—…ì€ Spring Bootì™€ ê°™ì€ ë³„ë„ì˜ ì›Œì»¤(Worker) í”„ë¡œì„¸ìŠ¤ê°€ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\n**ê¶Œì¥ ì²˜ë¦¬ ìˆœì„œ (ì‹ ë¢°ì„± ë³´ì¥):**\n1.  **ì‘ì—… ì›ìì ìœ¼ë¡œ ì´ë™ (`BLMOVE`):** 'ëŒ€ê¸° í'ì—ì„œ 'ì²˜ë¦¬ ì¤‘ í'ë¡œ ì‘ì—…ì„ ì•ˆì „í•˜ê²Œ ì´ë™ì‹œí‚µë‹ˆë‹¤.\n2.  **ìƒì„¸ ì •ë³´ ì¡°íšŒ (`HGETALL`):** ì´ë™ì‹œí‚¨ ì‘ì—… `uuid`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n3.  **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰:** ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ ë“± ì•Œë¦¼ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n4.  **ì‘ì—… ì™„ë£Œ ì²˜ë¦¬ (`LREM`):** ì‘ì—…ì´ ì„±ê³µí•˜ë©´ 'ì²˜ë¦¬ ì¤‘ í'ì—ì„œ í•´ë‹¹ ì‘ì—…ì„ ì œê±°í•©ë‹ˆë‹¤.\n5.  **ì˜ˆì™¸ ì²˜ë¦¬:** ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‘ì—…ì„ 'ì²˜ë¦¬ ì¤‘ í'ì— ë‚¨ê²¨ë‘ì–´ ë°ì´í„° ìœ ì‹¤ì„ ë°©ì§€í•©ë‹ˆë‹¤.\n</details>\n\n<details>\n<summary>III. í•µì‹¬ Redis ëª…ë ¹ì–´ ë° Spring Data Redis íƒ€ì… ë§¤í•‘</summary>\n\n> Spring Boot (`RedisTemplate`) ì‚¬ìš© ì‹œ ê° Redis ëª…ë ¹ì–´ì™€ ë§¤í•‘ë˜ëŠ” Java íƒ€ì…ì„ ëª…ì‹œí•©ë‹ˆë‹¤.\n\n#### **1. `BLMOVE`**\n-   **ì„¤ëª…:** ë¦¬ìŠ¤íŠ¸ì˜ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ì˜ ì²« ë²ˆì§¸ ìš”ì†Œë¡œ **ì›ìì ìœ¼ë¡œ ì´ë™**ì‹œí‚¤ê³ , ë§Œì•½ ì›ë³¸ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìœ¼ë©´ ì§€ì •ëœ ì‹œê°„ ë™ì•ˆ ìƒˆë¡œìš´ ìš”ì†Œê°€ ì¶”ê°€ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ”(Blocking) ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n-   **í•µì‹¬ ì—­í• :** ì›Œì»¤ê°€ ì—¬ëŸ¬ ê°œ ì‹¤í–‰ë˜ì–´ë„ **ë‹¨ í•˜ë‚˜ì˜ ì›Œì»¤ë§Œì´ ì‘ì—…ì„ ê°€ì ¸ê°€ë„ë¡ ë³´ì¥**í•˜ë©°(ê²½ìŸ ìƒíƒœ ë°©ì§€), íê°€ ë¹„ì—ˆì„ ë•Œ ë¶ˆí•„ìš”í•œ CPU ì‚¬ìš©ì„ ë§‰ì•„ì¤ë‹ˆë‹¤. ì‘ì—… ìœ ì‹¤ ë°©ì§€ì˜ í•µì‹¬ì…ë‹ˆë‹¤.\n-   **Java `RedisTemplate` ë°˜í™˜ íƒ€ì…:** `String`\n    -   ì´ë™ëœ ì‘ì—… `uuid`ê°€ ë¬¸ìì—´ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. íê°€ ë¹„ì–´ íƒ€ì„ì•„ì›ƒì´ ë°œìƒí•˜ë©´ `null`ì´ ë°˜í™˜ë©ë‹ˆë‹¤.\n    ```java\n    String taskId = redisTemplate.opsForList().move(\n        \"daily_notification:queue:EMAIL\", ListOperations.Direction.RIGHT,\n        \"daily_notification:processing_queue:EMAIL\", ListOperations.Direction.LEFT,\n        Duration.ofSeconds(10)\n    );\n    if (taskId != null) {\n        // ... process task\n    }\n    ```\n\n#### **2. `HGETALL`**\n-   **ì„¤ëª…:** Hash ë°ì´í„° êµ¬ì¡°ì—ì„œ ëª¨ë“  í•„ë“œì™€ ê°’ì˜ ìŒì„ ê°€ì ¸ì˜¤ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n-   **í•µì‹¬ ì—­í• :** ì‘ì—… `uuid`ì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  ì•Œë¦¼ ìƒì„¸ ì •ë³´(ìˆ˜ì‹ ì, ë©”ì‹œì§€ ë‚´ìš© ë“±)ë¥¼ í•œ ë²ˆì˜ ëª…ë ¹ì–´ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤.\n-   **Java `RedisTemplate` ë°˜í™˜ íƒ€ì…:** `Map<Object, Object>` ë˜ëŠ” `Map<String, String>`\n    -   ì¡°íšŒëœ Hashì˜ í•„ë“œ-ê°’ ìŒë“¤ì´ `Map`ìœ¼ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. `RedisTemplate` ì„¤ì •ì— ë”°ë¼ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n    ```java\n    Map<Object, Object> details = redisTemplate.opsForHash().entries(\"daily_notification:detail:\" + taskId);\n    String userId = (String) details.get(\"user_id\");\n    String message = (String) details.get(\"message\");\n    ```\n\n#### **3. `LREM`**\n-   **ì„¤ëª…:** ë¦¬ìŠ¤íŠ¸ì—ì„œ ì§€ì •ëœ ê°’ê³¼ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œë¥¼ **ê°œìˆ˜ë¥¼ ì§€ì •í•˜ì—¬** ì œê±°í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n-   **í•µì‹¬ ì—­í• :** ì•Œë¦¼ ë°œì†¡ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì¹œ ì‘ì—…ì„ 'ì²˜ë¦¬ ì¤‘ í'ì—ì„œ **ì •í™•íˆ í•˜ë‚˜ë§Œ ì œê±°**í•˜ì—¬, ë™ì¼í•œ ì‘ì—…ì´ ì¤‘ë³µ ì²˜ë¦¬ë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.\n-   **Java `RedisTemplate` ë°˜í™˜ íƒ€ì…:** `Long`\n    -   ì œê±°ëœ ìš”ì†Œì˜ ê°œìˆ˜ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. ë³´í†µ `1`ì´ ë°˜í™˜ë˜ë©°, `0`ì´ ë°˜í™˜ë˜ë©´ ë¬´ì–¸ê°€ ì˜ëª»ëœ ìƒí™©(ì˜ˆ: ì´ë¯¸ ì‚­ì œë¨)ì„ì„ ì¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n    ```java\n    // count: 1 > ì•ì—ì„œë¶€í„° taskIdì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œ 1ê°œë§Œ ì œê±°\n    Long removedCount = redisTemplate.opsForList().remove(\"daily_notification:processing_queue:EMAIL\", 1, taskId);\n    ```\n</details>",
        "operationId": "run_monitoring_api_v1_monitoring_run_monitoring_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "status": {
                      "type": "string",
                      "title": "Status"
                    },
                    "monitored_bookmarks": {
                      "type": "integer",
                      "title": "Monitored Bookmarks"
                    },
                    "updates_found": {
                      "type": "integer",
                      "title": "Updates Found"
                    },
                    "lock_status": {
                      "type": "string",
                      "title": "Lock Status"
                    }
                  },
                  "type": "object",
                  "required": [
                    "status",
                    "monitored_bookmarks",
                    "updates_found",
                    "lock_status"
                  ],
                  "title": "MonitoringResponse",
                  "description": "ëª¨ë‹ˆí„°ë§ ì‹¤í–‰ ê²°ê³¼ ì‘ë‹µ ëª¨ë¸"
                }
              }
            }
          },
          "404": {
            "description": "ëª¨ë‹ˆí„°ë§ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          },
          "500": {
            "description": "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ChatRequest": {
        "properties": {
          "user_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "íšŒì› ID. ì—†ìœ¼ë©´ ë¹„íšŒì›ìœ¼ë¡œ ê°„ì£¼í•¨."
          },
          "session_uuid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Uuid",
            "description": "ê¸°ì¡´ ì±„íŒ… ì„¸ì…˜ì˜ UUID. ìƒˆ ì±„íŒ… ì‹œì‘ ì‹œì—ëŠ” null."
          },
          "message": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Message",
            "description": "ì‚¬ìš©ìì˜ ì§ˆë¬¸ ë©”ì‹œì§€"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "ChatRequest",
        "description": "/api/v1/chat ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ìš”ì²­ ìŠ¤í‚¤ë§ˆ.\nêµ¬í˜„ê³„íš.md vFinal ë° chat_endpoint_implementation_plan.md v1.0 ê¸°ì¤€."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "properties": {
                "loc": {
                  "items": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "integer"
                      }
                    ]
                  },
                  "type": "array",
                  "title": "Location"
                },
                "msg": {
                  "type": "string",
                  "title": "Message"
                },
                "type": {
                  "type": "string",
                  "title": "Error Type"
                }
              },
              "type": "object",
              "required": [
                "loc",
                "msg",
                "type"
              ],
              "title": "ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "MonitoringResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "monitored_bookmarks": {
            "type": "integer",
            "title": "Monitored Bookmarks"
          },
          "updates_found": {
            "type": "integer",
            "title": "Updates Found"
          },
          "lock_status": {
            "type": "string",
            "title": "Lock Status"
          }
        },
        "type": "object",
        "required": [
          "status",
          "monitored_bookmarks",
          "updates_found",
          "lock_status"
        ],
        "title": "MonitoringResponse",
        "description": "ëª¨ë‹ˆí„°ë§ ì‹¤í–‰ ê²°ê³¼ ì‘ë‹µ ëª¨ë¸"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
};
        
        // Swagger UI ì´ˆê¸°í™” (ì°¸ì¡° í•´ê²° ìµœì í™”)
        window.onload = function() {
            window.ui = SwaggerUIBundle({
                spec: apiSpec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                validatorUrl: null, // ì™¸ë¶€ ê²€ì¦ ë¹„í™œì„±í™”
                docExpansion: "list", // íƒœê·¸ëŠ” í¼ì¹˜ë˜, ì˜¤í¼ë ˆì´ì…˜ì€ ì ‘íŒ
                defaultModelsExpandDepth: 2,
                defaultModelExpandDepth: 2,
                displayOperationId: false,
                displayRequestDuration: true,
                filter: false,
                showExtensions: false,
                showCommonExtensions: false,
                tryItOutEnabled: true,
                persistAuthorization: true,
                withCredentials: true,
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch', 'head', 'options'],
                // ì°¸ì¡° í•´ê²° ìµœì í™” ì„¤ì •
                resolve: {
                    external: false  // ì™¸ë¶€ ì°¸ì¡° í•´ê²° ë¹„í™œì„±í™”
                },
                // í•œêµ­ì–´ ì§€ì› ì„¤ì •
                defaultModelRendering: 'example',
                requestSnippetsEnabled: true,
                requestSnippets: {
                    generators: {
                        curl_bash: {
                            title: "cURL (bash)",
                            syntax: "bash"
                        },
                        curl_powershell: {
                            title: "cURL (PowerShell)",
                            syntax: "powershell"
                        },
                        curl_cmd: {
                            title: "cURL (CMD)",
                            syntax: "bash"
                        }
                    },
                    defaultExpanded: true
                }
            });
            
            // ë¡œë”© ì™„ë£Œ í›„ ì¶”ê°€ ì„¤ì •
            setTimeout(() => {
                // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸
                document.title = `Trade Python AI Service - API ë¬¸ì„œ`;
                
                // ì½˜ì†” ë©”ì‹œì§€
                console.log('ğŸš€ Trade Python AI Service API ë¬¸ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
                console.log('ğŸ“š API ë²„ì „: 6.1.0');
                console.log('ğŸŒ ì„œë²„: http://0.0.0.0:8000/api/v1');
                console.log('ğŸ–¥ï¸ í”Œë«í¼: Windows (Windows í˜¸í™˜ì„± ê°œì„ ë¨)');
                console.log('ğŸ”§ ì°¸ì¡° í•´ê²°: Context7 ê¸°ë°˜ ì¸ë¼ì¸ í•´ê²° ì™„ë£Œ');
                
                // Windows ì‚¬ìš©ìë¥¼ ìœ„í•œ ë©”ì‹œì§€
                if (navigator.platform.indexOf('Win') > -1) {
                    console.log('âœ… Windows í™˜ê²½ì—ì„œ psycopg í˜¸í™˜ì„± ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
                
                // ì°¸ì¡° í•´ê²° í™•ì¸
                const schema = window.ui.getSystem().getState().get('spec').get('json');
                const hasRefs = JSON.stringify(schema).includes('$ref');
                if (!hasRefs) {
                    console.log('âœ… ëª¨ë“  $ref ì°¸ì¡°ê°€ ì„±ê³µì ìœ¼ë¡œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    console.warn('âš ï¸ ì¼ë¶€ ì°¸ì¡°ê°€ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                }
                
                // ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                const tryOutButtons = document.querySelectorAll('.try-out__btn');
                tryOutButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        console.log('ğŸ”§ Try it out ë²„íŠ¼ì´ í´ë¦­ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    });
                });
            }, 1000);
        };
        
        // ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Swagger UI ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', msg, error);
            document.getElementById('swagger-ui').innerHTML = `
                <div style="padding: 40px; text-align: center; color: #d32f2f;">
                    <h2>âŒ ë¬¸ì„œ ë¡œë”© ì‹¤íŒ¨</h2>
                    <p>API ë¬¸ì„œë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p>ë¸Œë¼ìš°ì €ì˜ ê°œë°œì ë„êµ¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                    <details style="margin-top: 20px; text-align: left;">
                        <summary>ì˜¤ë¥˜ ìƒì„¸ ì •ë³´</summary>
                        <pre>${JSON.stringify({ msg, url, lineNo, columnNo, error: error?.toString() }, null, 2)}</pre>
                    </details>
                </div>
            `;
        };
    </script>
</body>
</html>